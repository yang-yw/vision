ORG 0000H
LJMP MAIN

RS EQU P1.5
RW EQU P1.6
E EQU P1.7
	
MAIN:
ACALL LCD
LCD:
ACALL LCDINI
ACALL CHAR
ACALL SHOW1
ACALL SHOW2
RET
LCDINI:
MOV P0,#01H
ACALL ENABLE
MOV P0,#38H
ACALL ENABLE
MOV P0,#0FH
ACALL ENABLE
RET
ENABLE:
CLR RS
CLR RW
CLR E
ACALL DELAY
SETB E
RET
WRITE:
MOV R7,#00H
L2:
MOV A,R7
MOVC A,@A+DPTR
ACALL WRITENABLE
INC R7
CJNE R7,#40H,L2
RET
WRITENABLE:
MOV P0,A
SETB RS
CLR RW
CLR E
ACALL DELAY
SETB E
RET
CHAR:
MOV P0,#40H
ACALL ENABLE
MOV DPTR,#TABLE1
ACALL WRITE
RET
SHOW1:
MOV P0,#80H
ACALL ENABLE
MOV DPTR,#TABLE2
ACALL WRITE
RET
SHOW2:
MOV P0,#0C0H
ACALL ENABLE
MOV DPTR,#TABLE3
ACALL WRITE
RET
DELAY:
MOV R0,#20
D1:MOV R1,#250
DJNZ R1,$
DJNZ R0,D1
RET

TABLE1:
DB 004H,01FH,015H,01FH,015H,01FH,004H,007H;µç
DB 005H,00BH,01BH,009H,01FH,009H,01DH,009H;¿Æ
DB 008H,00BH,01DH,00AH,01FH,01BH,00DH,00BH;Ñî
DB 00AH,00DH,00FH,018H,01FH,00DH,00FH,008H;âù
DB 00EH,01FH,015H,00EH,004H,01FH,004H,00AH;ö©
DB 000H,000H,000H,000H,000H,000H,000H,000H

TABLE2:
DB 00H,01H,"1904",02H,03H,04H,05H,05H,05H,05H,05H,05H,05H

TABLE3:
DB "8206190428",05H,05H,05H,05H,05H,05H
	
END
